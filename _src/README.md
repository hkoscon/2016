# README

This site is generated by node.js gulp routine.
To change anything, please follow the workflow.

******

## Preparation

To start working, please start by installing `nodejs` and `npm` in
your environment. Please make sure that the command `node` is
callable before move on.

### for Ubuntu

In Ubuntu, please follow these commands:

```bash
sudo apt install nodejs
sudo ln -s /usr/bin/nodejs /usr/local/bin/node
```

### for Mac OS

It is recommended to use Homebrew to install `nodejs`.

Open your terminal then type these commands:

```bash
ruby -e "$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/master/install)"
brew install node
```

******

## Development


### Folder Structure

The repository contains these folders:
```
src/          - a folder to contain all source codes
  css/        - all scss / css files
    lib/      - css libraries downloaded (e.g. bootstrap)
  images/     - image files
  layouts/    - HTML layout files (SWIG template)
  pages/      - HTML page files (SWIG template)
  topics/     - topics' SWIG template and data
    data/     - contains data json of topics, speakers, tags and etc
  scripts/    - all javascripts
    vendors/  - javascripts to be used directly (instead of webpack bundle)
```


### Workflow

To start working:

1. Clone this repository
2. Open your terminal the folder containing this README
3. Type the command `npm run dev`
4. Your browser should be opened itself. If not, open your browser and
   go to: [http://localhost:3000](localhost:3000)
5. Modifying files should reload the browser. If not, just manually reload
   it.
6. When you're happy with the result, commit the changes and push to
   the origin repository.


### HTML

The site HTML is generated by [SWIG][swig] (a Javascript template engine).
The syntax is similar to normal HTML. It should be easy to read and work
with.

It supports layout, include and many nice feature to work with.

Please read their [documentation][swig] for more details.

Most pages are extending the [default.html][default.html], except the root
index file is extending [front.html][front.html].

[swig]: http://paularmstrong.github.io/swig/docs/
[default.html]: src/layouts/default.html
[front.html]: src/layouts/front.html


### Javascript

To change any javascript, you can modify [src/scripts/client.js][client.js].

[Webpack][webpack] will bundle it (and its dependencies, if any) into the
`assets/bundle.js`.

[client.js]: src/scripts/client.js
[webpack]: https://webpack.github.io/


### CSS

CSS file `assets/style.css` is generated from [src/css/style.scss][style.scss].

As the extension hinted, it is a SCSS file. [SCSS][scss] is a superset
of CSS. That means you can do ordinary CSS in there. The bootstrap css file
is bundled into `assets/style.css` by [gulp-sass][gulp-sass].

For more information about SCSS, please read [the documentation][scss].

[style.scss]: src/css/style.scss
[scss]: http://sass-lang.com/guide
[gulp-sass]: https://www.npmjs.com/package/gulp-sass

******

## Production

There are 2 ways to host the site in production environment:

### Method 1: Build the Site statically

1. Build the site by command: `npm run build`.
2. Host the output folder.

### Method 2: Reverse Proxy with nodejs

1. Export the parameter `PORT` to specify the port number
   which nodejs can bind to (e.g. `export PORT=8080`).
2. Run `npm run start`
3. Reverse proxy the port with your favorite web server
   (e.g. Apache, Nginx).
